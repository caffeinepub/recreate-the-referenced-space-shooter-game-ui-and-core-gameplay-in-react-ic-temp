@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* OKLCH Color System - Enhanced Neon Space Theme */
    /* Store as space-separated channels for Tailwind compatibility */
    --background: 0.10 0.02 240;
    --foreground: 0.96 0.05 200;

    --card: 0.14 0.03 240;
    --card-foreground: 0.96 0.05 200;

    --popover: 0.14 0.03 240;
    --popover-foreground: 0.96 0.05 200;

    --primary: 0.75 0.20 195;
    --primary-foreground: 0.10 0.02 240;

    --secondary: 0.70 0.25 300;
    --secondary-foreground: 0.96 0.05 200;

    --muted: 0.25 0.03 240;
    --muted-foreground: 0.65 0.05 200;

    --accent: 0.70 0.25 330;
    --accent-foreground: 0.96 0.05 200;

    --destructive: 0.55 0.25 20;
    --destructive-foreground: 0.96 0.05 200;

    --border: 0.30 0.05 240;
    --input: 0.30 0.05 240;
    --ring: 0.75 0.20 195;

    --radius: 0.5rem;

    /* Enhanced Neon colors */
    --neon-cyan: 0.75 0.20 195;
    --neon-purple: 0.70 0.25 300;
    --neon-magenta: 0.70 0.25 330;
    --neon-yellow: 0.85 0.20 90;
    --neon-orange: 0.75 0.22 50;

    /* Space theme */
    --space-dark: 0.08 0.02 240;
    --space-darker: 0.05 0.02 240;
    --space-card: 0.12 0.03 240;

    /* Dynamic viewport height for mobile */
    --app-dvh: 100vh;

    /* Responsive sizing tokens - Menu */
    --logo-size: clamp(80px, 20vw, 140px);
    --title-size: clamp(2.5rem, 8vw, 4.5rem);
    --menu-max-width: min(90vw, 28rem);
    --menu-card-padding: clamp(0.875rem, 3vw, 1.25rem);
    --menu-button-height: clamp(3rem, 12vw, 4rem);
    --menu-button-text: clamp(1rem, 3.5vw, 1.25rem);

    /* Responsive sizing tokens - HUD */
    --hud-gap: clamp(0.5rem, 2vw, 0.75rem);
    --hud-card-padding: clamp(0.5rem, 2vw, 0.75rem);
    --hud-text-label: clamp(0.625rem, 2vw, 0.75rem);
    --hud-text-value: clamp(1.125rem, 3.5vw, 1.5rem);
    --hud-pause-size: clamp(2.5rem, 8vw, 3.5rem);
    --hud-pause-icon: clamp(1.25rem, 4vw, 1.75rem);
    --hud-progress-width: clamp(10rem, 40vw, 16rem);
    --hud-progress-height: clamp(0.5rem, 2vw, 0.75rem);
    --hud-boss-progress-width: clamp(12rem, 50vw, 20rem);
    --hud-boss-progress-height: clamp(0.625rem, 2.5vw, 1rem);

    /* Responsive sizing tokens - Touch Controls */
    --control-size: clamp(80px, 20vw, 120px);
    --joystick-knob-size: clamp(40px, 10vw, 60px);
    --shoot-icon-size: clamp(32px, 8vw, 48px);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
}

@layer utilities {
  /* Glass card effects with enhanced styling */
  .glass-card {
    background: linear-gradient(
      135deg,
      oklch(0.15 0.03 240 / 0.7) 0%,
      oklch(0.12 0.03 240 / 0.5) 100%
    );
    border: 2px solid oklch(0.30 0.05 240 / 0.4);
    box-shadow: 
      0 0 30px oklch(0.75 0.20 195 / 0.15),
      inset 0 0 20px oklch(0.75 0.20 195 / 0.05);
    backdrop-filter: blur(16px);
  }

  /* Fallback for browsers without OKLCH support */
  @supports not (color: oklch(0 0 0)) {
    .glass-card {
      background: linear-gradient(
        135deg,
        rgba(20, 25, 45, 0.7) 0%,
        rgba(15, 20, 35, 0.5) 100%
      );
      border: 2px solid rgba(50, 60, 90, 0.4);
      box-shadow: 
        0 0 30px rgba(0, 200, 255, 0.15),
        inset 0 0 20px rgba(0, 200, 255, 0.05);
    }
  }

  .glass-card-hud {
    background: linear-gradient(
      135deg,
      oklch(0.14 0.03 240 / 0.75) 0%,
      oklch(0.10 0.03 240 / 0.6) 100%
    );
    border: 2px solid oklch(0.30 0.05 240 / 0.5);
    box-shadow: 
      0 0 25px oklch(0.75 0.20 195 / 0.2),
      inset 0 0 15px oklch(0.75 0.20 195 / 0.08);
    backdrop-filter: blur(20px);
  }

  @supports not (color: oklch(0 0 0)) {
    .glass-card-hud {
      background: linear-gradient(
        135deg,
        rgba(18, 23, 40, 0.75) 0%,
        rgba(12, 17, 30, 0.6) 100%
      );
      border: 2px solid rgba(50, 60, 90, 0.5);
      box-shadow: 
        0 0 25px rgba(0, 200, 255, 0.2),
        inset 0 0 15px rgba(0, 200, 255, 0.08);
    }
  }

  /* Enhanced neon shadow utilities */
  .shadow-neon-cyan {
    box-shadow: 0 0 30px oklch(0.75 0.20 195 / 0.5);
  }

  @supports not (color: oklch(0 0 0)) {
    .shadow-neon-cyan {
      box-shadow: 0 0 30px rgba(0, 200, 255, 0.5);
    }
  }

  .shadow-neon-cyan-lg {
    box-shadow: 0 0 45px oklch(0.75 0.20 195 / 0.7);
  }

  @supports not (color: oklch(0 0 0)) {
    .shadow-neon-cyan-lg {
      box-shadow: 0 0 45px rgba(0, 200, 255, 0.7);
    }
  }

  .shadow-neon-purple {
    box-shadow: 0 0 30px oklch(0.70 0.25 300 / 0.5);
  }

  @supports not (color: oklch(0 0 0)) {
    .shadow-neon-purple {
      box-shadow: 0 0 30px rgba(180, 100, 255, 0.5);
    }
  }

  .shadow-neon-purple-lg {
    box-shadow: 0 0 45px oklch(0.70 0.25 300 / 0.7);
  }

  @supports not (color: oklch(0 0 0)) {
    .shadow-neon-purple-lg {
      box-shadow: 0 0 45px rgba(180, 100, 255, 0.7);
    }
  }

  .shadow-neon-magenta {
    box-shadow: 0 0 30px oklch(0.70 0.25 330 / 0.5);
  }

  @supports not (color: oklch(0 0 0)) {
    .shadow-neon-magenta {
      box-shadow: 0 0 30px rgba(255, 100, 200, 0.5);
    }
  }

  .shadow-neon-magenta-lg {
    box-shadow: 0 0 45px oklch(0.70 0.25 330 / 0.7);
  }

  @supports not (color: oklch(0 0 0)) {
    .shadow-neon-magenta-lg {
      box-shadow: 0 0 45px rgba(255, 100, 200, 0.7);
    }
  }

  /* Enhanced drop shadow utilities */
  .drop-shadow-neon-cyan {
    filter: drop-shadow(0 0 20px oklch(0.75 0.20 195 / 0.7));
  }

  @supports not (color: oklch(0 0 0)) {
    .drop-shadow-neon-cyan {
      filter: drop-shadow(0 0 20px rgba(0, 200, 255, 0.7));
    }
  }

  .drop-shadow-neon-purple {
    filter: drop-shadow(0 0 20px oklch(0.70 0.25 300 / 0.7));
  }

  @supports not (color: oklch(0 0 0)) {
    .drop-shadow-neon-purple {
      filter: drop-shadow(0 0 20px rgba(180, 100, 255, 0.7));
    }
  }

  .drop-shadow-neon-magenta {
    filter: drop-shadow(0 0 20px oklch(0.70 0.25 330 / 0.7));
  }

  @supports not (color: oklch(0 0 0)) {
    .drop-shadow-neon-magenta {
      filter: drop-shadow(0 0 20px rgba(255, 100, 200, 0.7));
    }
  }

  /* Gameplay root container */
  .gameplay-root {
    position: relative;
    width: 100vw;
    height: var(--app-dvh);
    overflow: hidden;
    background: oklch(0.05 0.02 240);
  }

  @supports not (color: oklch(0 0 0)) {
    .gameplay-root {
      background: rgb(8, 10, 18);
    }
  }

  /* Touch controls overlay with proper z-index and safe areas */
  .touch-controls-overlay {
    position: absolute;
    inset: 0;
    z-index: 30;
    pointer-events: none;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
    padding-top: 0;
    gap: 1rem;
  }

  .touch-control-left,
  .touch-control-right {
    pointer-events: auto;
    flex-shrink: 0;
  }

  /* Enhanced joystick styling - Brighter neon-cyan/teal */
  .joystick-base {
    position: relative;
    cursor: pointer;
    user-select: none;
    border-radius: 9999px;
    border: 4px solid oklch(0.80 0.22 195 / 0.7);
    background: linear-gradient(
      135deg,
      oklch(0.80 0.22 195 / 0.25) 0%,
      oklch(0.75 0.20 195 / 0.15) 50%,
      oklch(0.70 0.25 300 / 0.08) 100%
    );
    box-shadow: 
      0 0 45px oklch(0.80 0.22 195 / 0.7),
      inset 0 0 30px oklch(0.80 0.22 195 / 0.3);
    backdrop-filter: blur(8px);
    transition: all 0.2s ease;
  }

  @supports not (color: oklch(0 0 0)) {
    .joystick-base {
      border: 4px solid rgba(0, 220, 255, 0.7);
      background: linear-gradient(
        135deg,
        rgba(0, 220, 255, 0.25) 0%,
        rgba(0, 200, 255, 0.15) 50%,
        rgba(180, 100, 255, 0.08) 100%
      );
      box-shadow: 
        0 0 45px rgba(0, 220, 255, 0.7),
        inset 0 0 30px rgba(0, 220, 255, 0.3);
    }
  }

  .joystick-base:active {
    border-color: oklch(0.85 0.24 195 / 0.9);
    box-shadow: 
      0 0 55px oklch(0.85 0.24 195 / 0.9),
      inset 0 0 35px oklch(0.85 0.24 195 / 0.4);
  }

  @supports not (color: oklch(0 0 0)) {
    .joystick-base:active {
      border-color: rgba(0, 240, 255, 0.9);
      box-shadow: 
        0 0 55px rgba(0, 240, 255, 0.9),
        inset 0 0 35px rgba(0, 240, 255, 0.4);
    }
  }

  .joystick-knob {
    position: absolute;
    left: 50%;
    top: 50%;
    border-radius: 9999px;
    border: 4px solid oklch(0.96 0.05 200 / 0.95);
    background: linear-gradient(
      135deg,
      oklch(0.85 0.24 195) 0%,
      oklch(0.80 0.22 195) 30%,
      oklch(0.75 0.20 195) 60%,
      oklch(0.70 0.25 300) 100%
    );
    box-shadow: 
      0 0 35px oklch(0.85 0.24 195 / 1),
      0 0 25px oklch(0.80 0.22 195 / 0.8),
      inset 0 2px 10px oklch(0.96 0.05 200 / 0.4);
    transition: transform 0.05s ease;
  }

  @supports not (color: oklch(0 0 0)) {
    .joystick-knob {
      border: 4px solid rgba(240, 245, 255, 0.95);
      background: linear-gradient(
        135deg,
        rgb(0, 240, 255) 0%,
        rgb(0, 220, 255) 30%,
        rgb(0, 200, 255) 60%,
        rgb(180, 100, 255) 100%
      );
      box-shadow: 
        0 0 35px rgba(0, 240, 255, 1),
        0 0 25px rgba(0, 220, 255, 0.8),
        inset 0 2px 10px rgba(240, 245, 255, 0.4);
    }
  }

  /* Enhanced shoot button styling - Brighter neon-magenta/pink */
  .shoot-button {
    position: relative;
    cursor: pointer;
    user-select: none;
    border-radius: 9999px;
    border: 4px solid oklch(0.75 0.28 330 / 0.8);
    background: linear-gradient(
      135deg,
      oklch(0.75 0.28 330 / 0.35) 0%,
      oklch(0.70 0.25 330 / 0.25) 40%,
      oklch(0.70 0.25 300 / 0.15) 70%,
      oklch(0.75 0.20 195 / 0.1) 100%
    );
    box-shadow: 
      0 0 50px oklch(0.75 0.28 330 / 0.8),
      inset 0 0 35px oklch(0.75 0.28 330 / 0.35);
    backdrop-filter: blur(8px);
    transition: all 0.15s ease;
  }

  @supports not (color: oklch(0 0 0)) {
    .shoot-button {
      border: 4px solid rgba(255, 120, 220, 0.8);
      background: linear-gradient(
        135deg,
        rgba(255, 120, 220, 0.35) 0%,
        rgba(255, 100, 200, 0.25) 40%,
        rgba(180, 100, 255, 0.15) 70%,
        rgba(0, 200, 255, 0.1) 100%
      );
      box-shadow: 
        0 0 50px rgba(255, 120, 220, 0.8),
        inset 0 0 35px rgba(255, 120, 220, 0.35);
    }
  }

  .shoot-button:active {
    transform: scale(0.95);
    border-color: oklch(0.80 0.30 330 / 1);
    box-shadow: 
      0 0 60px oklch(0.80 0.30 330 / 1),
      inset 0 0 40px oklch(0.80 0.30 330 / 0.45);
  }

  @supports not (color: oklch(0 0 0)) {
    .shoot-button:active {
      border-color: rgba(255, 140, 230, 1);
      box-shadow: 
        0 0 60px rgba(255, 140, 230, 1),
        inset 0 0 40px rgba(255, 140, 230, 0.45);
    }
  }

  /* Shoot button icon glow - Enhanced */
  .shoot-icon-glow {
    filter: drop-shadow(0 0 15px oklch(0.75 0.28 330 / 1));
  }

  @supports not (color: oklch(0 0 0)) {
    .shoot-icon-glow {
      filter: drop-shadow(0 0 15px rgba(255, 120, 220, 1));
    }
  }

  /* Menu and HUD card enhancements */
  .menu-card {
    transition: all 0.3s ease;
  }

  .menu-button {
    transition: all 0.2s ease;
  }

  .hud-card {
    transition: all 0.2s ease;
  }

  /* Debug overlay styling */
  .touch-debug-overlay {
    position: absolute;
    top: max(1rem, env(safe-area-inset-top));
    right: max(1rem, env(safe-area-inset-right));
    z-index: 9999;
    padding: 0.75rem 1rem;
    background: oklch(0.10 0.02 240 / 0.95);
    border: 2px solid oklch(0.75 0.20 195 / 0.5);
    border-radius: 0.5rem;
    box-shadow: 0 0 25px oklch(0.75 0.20 195 / 0.4);
    backdrop-filter: blur(12px);
    pointer-events: none;
  }

  @supports not (color: oklch(0 0 0)) {
    .touch-debug-overlay {
      background: rgba(12, 15, 25, 0.95);
      border: 2px solid rgba(0, 200, 255, 0.5);
      box-shadow: 0 0 25px rgba(0, 200, 255, 0.4);
    }
  }
}
